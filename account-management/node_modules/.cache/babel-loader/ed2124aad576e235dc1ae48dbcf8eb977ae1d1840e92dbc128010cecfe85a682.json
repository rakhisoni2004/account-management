{"ast":null,"code":"const STORAGE_KEY = 'react_intern_users';\nconst SESSION_KEY = 'react_intern_session';\nfunction readUsers() {\n  const raw = localStorage.getItem(STORAGE_KEY);\n  return raw ? JSON.parse(raw) : [];\n}\nfunction writeUsers(users) {\n  localStorage.setItem(STORAGE_KEY, JSON.stringify(users));\n}\nexport async function register({\n  name,\n  email,\n  password\n}) {\n  const users = readUsers();\n  const newUser = {\n    id: Date.now().toString(),\n    name,\n    email,\n    password\n  };\n  users.push(newUser);\n  writeUsers(users);\n  localStorage.setItem(SESSION_KEY, JSON.stringify(newUser));\n  const {\n    password: _,\n    ...safe\n  } = newUser;\n  return safe;\n}\nexport async function isEmailTaken(email) {\n  const users = readUsers();\n  return users.some(u => u.email.toLowerCase() === (email || '').toLowerCase());\n}\nexport async function login({\n  email,\n  password\n}) {\n  const users = readUsers();\n  const found = users.find(u => u.email.toLowerCase() === (email || '').toLowerCase());\n  if (!found) throw new Error('No account with that email');\n  if (found.password !== password) throw new Error('Invalid password');\n  localStorage.setItem(SESSION_KEY, JSON.stringify(found));\n  const {\n    password: _,\n    ...safe\n  } = found;\n  return safe;\n}\nexport function logout() {\n  localStorage.removeItem(SESSION_KEY);\n}\nexport function getCurrentUser() {\n  const raw = localStorage.getItem(SESSION_KEY);\n  if (!raw) return null;\n  const {\n    password,\n    ...safe\n  } = JSON.parse(raw);\n  return safe;\n}\nexport async function updateProfile(updated) {\n  const users = readUsers();\n  const idx = users.findIndex(u => u.id === updated.id);\n  if (idx === -1) throw new Error('User not found');\n  users[idx] = {\n    ...users[idx],\n    name: updated.name\n  };\n  writeUsers(users);\n  localStorage.setItem(SESSION_KEY, JSON.stringify(users[idx]));\n  const {\n    password: _,\n    ...safe\n  } = users[idx];\n  return safe;\n}","map":{"version":3,"names":["STORAGE_KEY","SESSION_KEY","readUsers","raw","localStorage","getItem","JSON","parse","writeUsers","users","setItem","stringify","register","name","email","password","newUser","id","Date","now","toString","push","_","safe","isEmailTaken","some","u","toLowerCase","login","found","find","Error","logout","removeItem","getCurrentUser","updateProfile","updated","idx","findIndex"],"sources":["C:/Users/Dell/Downloads/account-management/account-management/src/services/authService.js"],"sourcesContent":["const STORAGE_KEY = 'react_intern_users';\nconst SESSION_KEY = 'react_intern_session';\n\nfunction readUsers() {\n  const raw = localStorage.getItem(STORAGE_KEY);\n  return raw ? JSON.parse(raw) : [];\n}\nfunction writeUsers(users) { localStorage.setItem(STORAGE_KEY, JSON.stringify(users)); }\n\nexport async function register({ name, email, password }) {\n  const users = readUsers();\n  const newUser = { id: Date.now().toString(), name, email, password };\n  users.push(newUser);\n  writeUsers(users);\n  localStorage.setItem(SESSION_KEY, JSON.stringify(newUser));\n  const { password: _, ...safe } = newUser;\n  return safe;\n}\n\nexport async function isEmailTaken(email) {\n  const users = readUsers();\n  return users.some(u=>u.email.toLowerCase() === (email||'').toLowerCase());\n}\n\nexport async function login({ email, password }) {\n  const users = readUsers();\n  const found = users.find(u=>u.email.toLowerCase() === (email||'').toLowerCase());\n  if (!found) throw new Error('No account with that email');\n  if (found.password !== password) throw new Error('Invalid password');\n  localStorage.setItem(SESSION_KEY, JSON.stringify(found));\n  const { password: _, ...safe } = found;\n  return safe;\n}\n\nexport function logout() { localStorage.removeItem(SESSION_KEY); }\n\nexport function getCurrentUser() {\n  const raw = localStorage.getItem(SESSION_KEY);\n  if (!raw) return null;\n  const { password, ...safe } = JSON.parse(raw);\n  return safe;\n}\n\nexport async function updateProfile(updated) {\n  const users = readUsers();\n  const idx = users.findIndex(u=>u.id === updated.id);\n  if (idx === -1) throw new Error('User not found');\n  users[idx] = { ...users[idx], name: updated.name };\n  writeUsers(users);\n  localStorage.setItem(SESSION_KEY, JSON.stringify(users[idx]));\n  const { password: _, ...safe } = users[idx];\n  return safe;\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}